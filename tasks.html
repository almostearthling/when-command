

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="_static/favicon.ico" rel="icon" type="image/x-icon">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Native Tasks Editors &mdash; The When Automation Tool 1.11 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=1aaa2b4d"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Extra Tasks: Session Related" href="tasks_extra_session.html" />
    <link rel="prev" title="System Tray Resident Application" href="tray.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            The When Automation Tool
              <img src="_static/rafi-clock-256.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="main.html">The <strong>When</strong> Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Interface (CLI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="cfgform.html">Main Configuration Form</a></li>
<li class="toctree-l1"><a class="reference internal" href="tray.html">System Tray Resident Application</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Native Tasks Editors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#command">Command</a></li>
<li class="toctree-l2"><a class="reference internal" href="#lua-script">Lua Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="#session-related-tasks">Session Related Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#see-also">See also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tasks_extra_session.html">Extra Tasks: Session Related</a></li>
<li class="toctree-l1"><a class="reference internal" href="conditions.html">Condition Editors</a></li>
<li class="toctree-l1"><a class="reference internal" href="cond_timerelated.html">Time Related Conditions</a></li>
<li class="toctree-l1"><a class="reference internal" href="cond_actionrelated.html">Action Related Conditions</a></li>
<li class="toctree-l1"><a class="reference internal" href="cond_eventrelated.html">Event Conditions</a></li>
<li class="toctree-l1"><a class="reference internal" href="cond_extra01.html">Extra Conditions</a></li>
<li class="toctree-l1"><a class="reference internal" href="events.html">Native Events Editors</a></li>
<li class="toctree-l1"><a class="reference internal" href="events_extra01.html">Specific Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">History Box</a></li>
<li class="toctree-l1"><a class="reference internal" href="i18n.html">Localization</a></li>
<li class="toctree-l1"><a class="reference internal" href="appdata.html">Application Data Directory</a></li>
<li class="toctree-l1"><a class="reference internal" href="configfile.html">Generated Configuration File</a></li>
<li class="toctree-l1"><a class="reference internal" href="lua_considerations.html">Some Considerations on Lua</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="when_history.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">The When Automation Tool</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Native Tasks Editors</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/tasks.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="native-tasks-editors">
<h1>Native Tasks Editors<a class="headerlink" href="#native-tasks-editors" title="Link to this heading"></a></h1>
<p>There are two types of base task implemented in <strong>When</strong> which correspond to tasks natively supported by the underlying scheduler:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#command"><span class="xref myst">Command</span></a> based</p></li>
<li><p><a class="reference internal" href="#lua-script"><span class="xref myst">Lua Script</span></a> based</p></li>
</ul>
<p>Other, specific tasks may be added - which actually are specialized versions of the above mentioned ones.</p>
<p>In all editors, the task <em>Name</em> is mandatory and must be an alphanumeric string beginning with a letter or an underscore.<a class="footnote-reference brackets" href="#id2" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p>
<section id="command">
<h2>Command<a class="headerlink" href="#command" title="Link to this heading"></a></h2>
<p>Command tasks execute a command at the OS level which can be any kind of executable, that is, both scripts and binaries are accepted commands. The command, along with its arguments and startup folder, must be provided by the user.</p>
<p><img alt="WhenTaskCommand" src="_images/when-task-command.png" /></p>
<p>The definition of the related command and of the tests that are performed to determine its outcome is very similar to the corresponding <a class="reference internal" href="cond_actionrelated.html#command"><span class="std std-ref">condition</span></a> definition.</p>
<p>Apart from the mandatory name, the following entries must be specified:</p>
<ul class="simple">
<li><p><em>Command</em>: must either be the full path to an executable, or a command that can be found in the current execution <em>PATH</em></p></li>
<li><p><em>Arguments</em>: the arguments, if any, to be passed to the command</p></li>
<li><p><em>Working Folder</em>: the directory where the command is started by the OS.</p></li>
</ul>
<p>If the working folder is not important for command execution, a simple dot (<code class="docutils literal notranslate"><span class="pre">.</span></code>) can be entered to specify the “current folder”: the field can not be empty.</p>
<p>The <em>environment variables</em> deserve special consideration:</p>
<ul class="simple">
<li><p>by checking <em>Preserve Existing Environment</em> (default, recommended) the command starts with all the already defined variables, otherwise a fresh, empty environment is created</p></li>
<li><p>the <em>Set…</em> flag, if checked, <em>adds</em> two more variables: <em>WHENEVER_TASK</em> holding the current task name, and <em>WHENEVER_CONDITION</em> containing the name of the condition that triggered the task itself</p></li>
<li><p>more environment variables can be defined for the specific command: for this, it is sufficient to enter the variable name and the value in the respective fields, and click the <em>Update</em> button; to remove a variable it is sufficient to enter its name in the <em>Variable Name</em> field (or double click the entry in the list) and then click the <em>Remove</em> button. Clicking <em>Update</em> by providing a new value for an existing variable will update its value in the list.</p></li>
</ul>
<p>Variables provided in the list will add up to the existing ones, or <em>overwrite</em> the ones that share the same name.</p>
<p>The <em>Checks</em> section allows to test the outcome of commands by examining their output (either <em>stdout</em> or <em>stderr</em>) or the exit code. When selecting <em>Success</em> in the <em>Check for</em> drop down list, meeting the criteria provided on the right will be considered a success. Selecting <em>Failure</em> will cause the same event to be considered a failure. This especially counts when instructing conditions to stop task execution after either success or failure (see the <a class="reference internal" href="conditions.html"><span class="std std-doc">specific page</span></a>). When <em>Nothing</em> is selected, the outcome of the task will always be undetermined. In the same section, the flags below change the way the provided result is compared against the selected output (<em>stdout</em> or <em>stderr</em> only: ignored when the exit code is considered): <em>Exact Match</em> indicates that the output is matched against the provided string in its entirety (by default it is sufficient to find the provided string as a substring), <em>Case Sensitive</em> obviously considers uppercase and lowercase letters differently, while <em>Regular Expression</em> considers the provided string as a regular expression to match against the command output, either in its entirety or just partially depending on whether <em>Exact Match</em> is respectively checked or unchecked.</p>
<p>The <em>Timeout</em> parameter can be set to a specified number of seconds in order to force a command which can hang or take a long time to complete to stop after the provided time. In terms of outcome, a timeout terminated command is always considered as failed. The provided value must be a positive integer, to avoid timeout checking field must be left empty.</p>
</section>
<section id="lua-script">
<h2>Lua Script<a class="headerlink" href="#lua-script" title="Link to this heading"></a></h2>
<p>As a lightweight alternative to OS level commands, it is possible to run <em>Lua</em> scripts: since the <em>Lua</em> interpreter is embedded in the scheduler executable, execution of simple <em>Lua</em> scripts may have less impact on computational resources than equivalent tasks that require commands. The interpreter is provided with its full library, and although the script has to be specified in the scheduler configuration, it is possible to use the <code class="docutils literal notranslate"><span class="pre">require()</span></code> and <code class="docutils literal notranslate"><span class="pre">dofile()</span></code> functions to call external scripts.</p>
<p><img alt="WhenTaskLua" src="_images/when-task-lua.png" /></p>
<p>Success and failure of <em>Lua</em> based tasks are determined by the correspondence of the values held by some variables after the script execution. The variables to be checked are provided by the user by entering the variable name and the expected value respectively in the <em>Variable Name</em> and <em>New Value</em> fields, and clicking the <em>Update</em> button: the behavior of the list, the aforementioned fields and the <em>Update</em> and <em>Remove</em> buttons are similar to the ones seen for the <em>environment variables</em> in <a class="reference internal" href="#command"><span class="xref myst">command based tasks</span></a>. Checking the <em>Match ALL Results</em> box will cause the task to be successful only when <strong>all</strong> listed variables hold the expected values, while by default just one match among the listed ones is sufficient for success.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p><em>Lua</em> script based tasks will always <em>fail</em> if there is an error in the provided script.</p>
</div>
</section>
<section id="session-related-tasks">
<h2>Session Related Tasks<a class="headerlink" href="#session-related-tasks" title="Link to this heading"></a></h2>
<p>There are a bunch of simple session related tasks, useful for such things as turning off the computer or just locking the session under certain circumstances, that can be used with the application: more details can be found in the dedicated <a class="reference internal" href="tasks_extra_session.html"><span class="std std-doc">section</span></a>.</p>
</section>
<section id="see-also">
<h2>See also<a class="headerlink" href="#see-also" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="cond_actionrelated.html#command"><span class="std std-ref">Command Based Conditions</span></a></p></li>
<li><p><a class="reference internal" href="cond_actionrelated.html#lua-script"><span class="std std-ref">Lua Script Based Conditions</span></a></p></li>
<li><p><a class="reference internal" href="conditions.html"><span class="std std-doc">Conditions</span></a></p></li>
<li><p><a class="reference internal" href="events.html"><span class="std std-doc">Events</span></a></p></li>
</ul>
<p><a class="reference internal" href="main.html"><span class="std std-doc"><code class="docutils literal notranslate"><span class="pre">◀</span> <span class="pre">Main</span></code></span></a></p>
</section>
</section>
<hr class="footnotes docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id2" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Names beginning with the prefix <code class="docutils literal notranslate"><span class="pre">__When__private__</span></code> are reserved, and are not allowed when creating items.</p>
</aside>
</aside>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tray.html" class="btn btn-neutral float-left" title="System Tray Resident Application" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tasks_extra_session.html" class="btn btn-neutral float-right" title="Extra Tasks: Session Related" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015-2025, Francesco Garosi.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>