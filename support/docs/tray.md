# System Tray Resident Application

The system tray resident wrapper to **whenever** is launched via the `start` command: this option takes care of launching the **whenever** scheduler executable in the background, also avoiding to show the console window on _Windows_ desktops, and taking care to capture the scheduler output, interpret it to keep track of the tasks that have been executed along with their outcomes, and write the scheduler log to the [_application data_](cfgform.md#application-data) directory. It also displays a clock icon in the tray area, meaning that the scheduler is active, which can be right-clicked with the mouse to allow a certain degree of interaction with the underlying scheduler itself.

![TrayMenu](graphics/when-tray-menu.png)

The available entries are:

* _Pause/Resume Scheduler_: respectively pause scheduler checks or resume them; when the scheduler is paused no condition checks are performed and thus no tasks are launched. This does not affect however currently running tasks which keep running until their conclusion or until a timeout has been reached. When the scheduler is paused, the clock icon appears grayed out.
* _Reset Conditions_: reset the status of all conditions, and in particular consider all _non recurrent_ conditions that were verified during the session (and that, therefore, would not be checked anymore) as _not_ verified, thus restarting checks.
* _Show History_: display the [_History Box_](history.md), a streamlined viewer that displays the tasks that have been executed along with their outcomes.
* _Configurator_: display the [configuration application](cfgform.md).
* _About_: display a simple information box.
* _Exit_: stop the underlying scheduler and exit the resident appliication: this may require some time because **When** waits for all the tasks to finish before releasing the scheduler.[^1]

When launching the resident wrapper, the following parameters can be specified on the command line:

- `-D`/`--dir-appdata` _PATH_: specify the application data and configuration directory
- `-W`/`--whenever` _PATH_: specify the path to the whenever executable (defaults to the one found in the PATH if any, otherwise exit with error)
- `-L`/`--log-level` _LEVEL_: specify the log level, all **whenever** levels are supported (default: _info_, possible values are _error_, _warn_, _info_, _debug_, and _trace_)

However, it might be more useful _not_ to specify a custom _APPDATA_ directory unless really needed, since by default both **When** and **whenever_tray** use this directory to locate the scheduler configuration file -- that is, the one generated by **When** in configuration mode.

Note that, in order to reload the configuration, the scheduler has to be completely restarted: at the moment there is no way to achieve this in **When** if not by exiting the resident application and relaunching it.


[^1]: Unless a timeout is set, some tasks may actually never exit: in this case **When** itself wil not be able to exit.
